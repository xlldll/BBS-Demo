/*BBS_Demo_Github-0.0.1.js 2017-10-16 10:50 */
$(function(){var a="bbs-github:80";$("#question_button").click(function(){$.cookie("user")?$("#quesBox").modal({show:!0,keyboard:!0}):($("#question_button").popover("show"),setTimeout(function(){$("#question_button").popover("hide"),$("#logBox").modal({show:!0,keyboard:!0})},1e3))}),$("#question_button").popover({html:!0,content:'您还未登录！&nbsp;<img src="img/error.png"/>',placement:"bottom",delay:{show:50,hide:50},trigger:"manual"});var b=UM.getEditor("myEditor");b.ready(function(){b.setContent("<p>如题所示。</p>")}),b.execCommand("cleardoc"),$("#returnQues").click(function(){$(this).parents(".modal-footer").prev(".modal-body").find("input").removeClass("invalid valid"),$("#quesWarn").children().css("display","none"),$("#quesForm").resetForm(),b.execCommand("cleardoc")}),$("#quesForm").validate({rules:{quesN:{required:!0,minlength:6}},messages:{quesN:{required:"问题标题不得为空！",minlength:jQuery.format("标题不得小于{0}位！")}},errorLabelContainer:"#quesWarn",wrapper:"span",submitHandler:function(c){$(c).ajaxSubmit({url:"http://"+a+"/src/php/add_content.php",type:"POST",data:{user:$.cookie("user"),content:b.getContentTxt()},beforeSubmit:function(a,b,c){$("#quesBtn").popover({html:!0,content:'正在提交问题&nbsp;<img src="img/loading.gif"/>',placement:"top",delay:{show:50,hide:50},trigger:"manual"}),$("#quesBtn").popover("show"),$("#quesBtn").attr("disabled","")},success:function(a,c){$("#quesBtn").popover({html:!0,content:'问题提交成功&nbsp;<img src="img/success.gif"/>',placement:"top",delay:{show:50,hide:50},trigger:"manual"}),a&&setTimeout(function(){$("#quesBox").modal("hide"),$("#quesForm").resetForm(),$("#quesBtn").removeAttr("disabled",""),$("#quesBtn").popover("hide"),b.execCommand("cleardoc")},2e3)}})},highlight:function(a,b){$(a).removeClass("valid"),$(a).addClass("invalid")},unhighlight:function(a,b){$(a).removeClass("invalid"),$(a).addClass("valid")}})});