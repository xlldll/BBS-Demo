/*BBS_Demo_Github-0.0.1.js 2017-04-05 23:46 */
$(function(){$("#question_button").click(function(){$.cookie("user")?$("#quesBox").modal({show:!0,keyboard:!0}):($("#question_button").popover("show"),setTimeout(function(){$("#question_button").popover("hide"),$("#logBox").modal({show:!0,keyboard:!0})},1e3))}),$("#question_button").popover({html:!0,content:'您还未登录！&nbsp;<img src="img/error.png"/>',placement:"bottom",delay:{show:50,hide:50},trigger:"manual"});var a=UM.getEditor("myEditor");a.ready(function(){a.setContent("<p>如题所示。</p>")}),a.execCommand("cleardoc"),$("#returnQues").click(function(){$(this).parents(".modal-footer").prev(".modal-body").find("input").removeClass("invalid valid"),$("#quesWarn").children().css("display","none"),$("#quesForm").resetForm(),a.execCommand("cleardoc")}),$("#quesForm").validate({rules:{quesN:{required:!0,minlength:6}},messages:{quesN:{required:"问题标题不得为空！",minlength:jQuery.format("标题不得小于{0}位！")}},errorLabelContainer:"#quesWarn",wrapper:"span",submitHandler:function(b){$(b).ajaxSubmit({url:"http://bbs-demo/src/php/add_content.php",type:"POST",data:{user:$.cookie("user"),content:a.getContentTxt()},beforeSubmit:function(a,b,c){$("#quesBtn").popover({html:!0,content:'正在提交问题&nbsp;<img src="img/loading.gif"/>',placement:"top",delay:{show:50,hide:50},trigger:"manual"}),$("#quesBtn").popover("show"),$("#quesBtn").attr("disabled","")},success:function(b,c){$("#quesBtn").popover({html:!0,content:'问题提交成功&nbsp;<img src="img/success.gif"/>',placement:"top",delay:{show:50,hide:50},trigger:"manual"}),b&&setTimeout(function(){$("#quesBox").modal("hide"),$("#quesForm").resetForm(),$("#quesBtn").removeAttr("disabled",""),$("#quesBtn").popover("hide"),a.execCommand("cleardoc")},2e3)}})},highlight:function(a,b){$(a).removeClass("valid"),$(a).addClass("invalid")},unhighlight:function(a,b){$(a).removeClass("invalid"),$(a).addClass("valid")}})});